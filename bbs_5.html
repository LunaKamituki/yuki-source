<script>
  function urlConvertToLink(str){
    const pattern = /(?:https?:\/\/[\w\.\\-_@:\/~\?%&;=\+#',\(\)\*\!]+|\/(?:watch|search|playlist)\?(?:[\w\.\\-_@:\/~\?%&;=\+#',\(\)\*\!]+=[\w%]+&?)+|\/(?:channel|hashtag)\/[\w\.\\-_@:\/~\?%&;=\+#',\(\)\*\!]+)/
    // 元々は/\/(?:watch|search|playlist)\?(?:[\w%]+=[\w%]+&?)+/gと/\/(?:channel|hashtag)\/[\w%]+/g
    const makeLink = function(matched) {
      return `<a href="${matched}">${matched}</a>`;
    }
    return str.replace(pattern, makeLink)
  }
</script>
