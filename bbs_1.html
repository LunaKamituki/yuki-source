<script>
const getElmsByName = document.getElementsByName
const getElmsByTag = document.getElementsByTagName
const formElm = getElmsByTag('form')[0];
const messageElm = getElmsByName('message')[0];
const channelElms = getElmsByTag('option');

document.addEventListener('keydown', function(event) {
  if((event.ctrlKey || event.metaKey) && event.shiftKey){
    
    console.log(event.code);
    
    switch(event.code){
      case 'KeyM':
        messageElm.focus();
        break

      case 'KeyN':
        window.scroll({
          top: 0,
          behavior: "smooth",
        });
        break
        
      case 'KeyH':
        location.replace("/");
        break
        
      case 'KeyR':
        location.replace(location.href);
        break
      
      case 'KeyL':
        if(!(messageElm.value == '' || messageElm.value.includes(getElmsByName('seed')[0].value))){
          formElm.submit();
        }
        break
        
      case 'KeyJ':
        channelElms[0].toggleAttribute('selected');
        channelElms[1].toggleAttribute('selected');
        break

      // 端末によっては、Slashの場合既存のキーボードショートカットと重複するのでPeriodを追加した。
      case 'Slash':
      case 'Period':
        document.getElementById('shortcut_help').classList.toggle('hiddenElm');
        break

    }
  }
});

getElmsByTag('form')[0].setAttribute('onsubmit', 'return checkForm()')
  
function checkForm(){
  if(document.getElementsByName('message')[0].value.includes(document.getElementsByName('seed')[0].value)){
    return false
  }else{
    return true
  }
}
    
</script>
