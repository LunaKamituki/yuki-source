<!-- Yuki BBSに追加するコード1（キーボードショートカット・シード送信防止） -->

<script>
let formElm = document.getElementsByTagName('form')[0];
let messageElm = document.getElementsByName('message')[0];
let channelElms = document.getElementsByTagName('option');
let seedElm = document.getElementsByName('seed')[0];

document.addEventListener('keydown', function(event) {
  if((event.ctrlKey || event.metaKey) && event.shiftKey){
    
    console.log(event.code);
    
    switch(event.code){
      case 'KeyM':
        messageElm.focus();
        break

      case 'KeyN':
        window.scroll({
          top: 0,
          behavior: "smooth",
        });
        break
        
      case 'KeyH':
        location.replace("/");
        break
        
      case 'KeyR':
        location.replace(location.href);
        break
      
      case 'KeyL':
        if(!(messageElm.value == '')){
          formElm.submit();
        }
        break
        
      case 'KeyJ':
        channelElms[0].toggleAttribute('selected');
        channelElms[1].toggleAttribute('selected');
        break

      case 'KeyB':
        seedElm.classList.toggle('hiddenElm');
        break

      case 'KeyK':
        window.open('https://www.google.com/', '_self');
        break
        
      // 端末によっては、Slashの場合既存のキーボードショートカットと重複するのでPeriodを追加した。
      case 'Slash':
      case 'Period':
        document.getElementById('shortcut_help').classList.toggle('hiddenElm');
        break
    }
  }
});

document.getElementsByTagName('form')[0].setAttribute('onsubmit', 'return checkForm()')
  
function checkForm(){
  if(document.getElementsByName('message')[0].value.includes(document.getElementsByName('seed')[0].value)){
    console.log('error: メッセージの中にシードが含まれています。')
    return false
  }else{
    console.log('confilm')
    return true
  }
}

document.getElementsByTagName('title')[0].textContent = '罪刑法定主義とは？'
</script>
